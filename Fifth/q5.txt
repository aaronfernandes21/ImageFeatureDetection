Design and implement line detection